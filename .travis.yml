language: node_js
sudo: false
node_js:
  - '6'
  - '7'
  - '8'
cache: yarn
script:
  - gulp test
  - cd $TRAVIS_BUILD_DIR
  - chmod +x ./scripts/deploy.sh
after_success:
  - npm install codecov codacy-coverage
  - cat ./coverage/lcov.info | node_modules/.bin/codacy-coverage
addons:
  srcclr: true
deploy:
  # deploy develop to the staging environment
  - provider: script
    script: ./staging.sh
    skip_cleanup: true
    on:
      branch: master-test
